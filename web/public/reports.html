<!doctype html>
<html>
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Reports</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ApexCharts CDN -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <style>
    /* layout */
    #chartsGrid { display: grid; gap: 16px; grid-template-columns: 1fr; }
    @media(min-width:1100px){ #chartsGrid { grid-template-columns: 1fr 1fr; } }
    .card { background: white; border-radius: 8px; padding: 16px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }
    .kpi { display:flex; gap:12px; align-items:center; }
    .kpi .num { font-weight:700; font-size:20px; }
    .controls { margin-bottom:12px; }
  </style>
</head>
<body class="min-h-screen bg-gray-50">
  <header class="bg-white border-b py-4">
    <div class="max-w-6xl mx-auto px-6 flex justify-between items-center">
      <div>
        <h1 class="text-xl font-semibold">Reports</h1>
      </div>
      <div>
        <button id="logoutBtn" class="text-sm text-gray-700">Logout</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6 py-8">

  <!-- KPI row -->
  <!-- <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="card">
      <div class="kpi">
        <div class="num" id="kpiPresent">—</div>
        <div>Present Today</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="num" id="kpiAbsent">—</div>
        <div>Absent Today</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="num" id="kpiLate">—</div>
        <div>Late Today</div>
      </div>
    </div>
    <div class="card">
      <div class="kpi">
        <div class="num" id="kpiRate">—</div>
        <div>Attendance Rate</div>
      </div>
    </div>
  </div> -->

  <!-- Controls -->
  <div class="card controls mb-6">
    <div class="flex gap-3 items-center">
      <label class="text-sm">Year:</label>
      <select id="selectYear" class="border rounded px-3 py-2 text-sm"></select>
      <button id="refreshCharts"
              class="bg-blue-600 text-white px-4 py-2 rounded text-sm">
        Refresh
      </button>
      <div class="ml-auto text-sm text-gray-500">
        Attendance analytics & trends
      </div>
    </div>
  </div>

  <!-- Charts -->
  <div id="chartsGrid" class="mb-10">
    <div id="chartMonthlyCard" class="card">
      <h3 class="font-semibold mb-2">Monthly Trend</h3>
      <div id="chartMonthly" style="height:320px"></div>
    </div>

    <div id="chartMonthlyCompCard" class="card">
      <h3 class="font-semibold mb-2">Monthly Comparison</h3>
      <div id="chartMonthlyComp" style="height:320px"></div>
    </div>

    <div id="chartDeptCard" class="card" style="grid-column: 1 / -1">
      <h3 class="font-semibold mb-2">By Department</h3>
      <div id="chartDept" style="height:360px"></div>
    </div>
  </div>

  <!-- HR & USER REPORT INBOX -->
  <div class="card">
    <h2 class="text-lg font-semibold mb-4">Reports from HR & Employees</h2>

    <div id="inboxList" class="space-y-3 text-sm text-gray-600">
      <!-- populated by JS -->
      Loading reports...
    </div>
  </div>

</main>

<!-- REPORT DETAIL MODAL -->
<div id="reportModal"
     class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl w-full max-w-lg p-6 shadow-xl">
    <h3 id="modalTitle" class="text-xl font-semibold mb-1"></h3>
    <p id="modalMeta" class="text-sm text-gray-500 mb-4"></p>

    <div id="modalMessage"
         class="text-gray-700 whitespace-pre-line border rounded-lg p-3 bg-gray-50">
    </div>

    <div class="text-right mt-6">
      <button onclick="closeReportModal()"
              class="px-5 py-2 rounded-lg bg-gray-200 hover:bg-gray-300">
        Close
      </button>
    </div>
  </div>
</div>



  <script src="/js/reports.js"></script>
</body>
</html>
